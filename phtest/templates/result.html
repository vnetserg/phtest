<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Тестирование АГЗ МЧС</title> 
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<style type="text/css">
			@media (min-width: 349px){
				#overflowpanel { height: 300px; overflow-y: auto;}
			}
			@media (min-width: 450px){
				#htext {
					font-size: large;
				}
				#overflowpanel { height: 300px; overflow-y: auto;}
			}
			@media (min-width: 768px){
				#htext {
					font-size: x-large;
				}
				#overflowpanel { height: 400px;overflow-y: auto;}
			}			
			@media (min-width: 1200px){
				#htext {
					font-size: xx-large;
				}
				#overflowpanel { height: 500px;overflow-y: auto;}
			}
		</style>		
	</head>
	<body style="background-image: url(../static/gerb.png); background-repeat: no-repeat; background-attachment: fixed;">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="container">
						<div class="header_main" style="margin: 0px; z-index: 0; min-height: 100px; width: inherit;">
							<div  style="height: auto; z-index: 9999; background-color: #ffffff; width: inherit; position: fixed;">
								<div class="col-md-12">
									<p class="text-center" id="htext">Федеральное Государственное Бюджетное Образовательное Учереждение Высшего Образования Академия Гражданской Защиты МЧС России
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			<div class="row">
				<div class="col-md-12">
					<div class="container">
						<div class="text-center"> 
							<h3>
								На данной странцие вы можете ознакомиться со своими результатами!
							</h3>
						</div>
						<div id="overflowpanel">
							{% for qst in questions %}
							<div class="panel panel-info">
								<div class="panel-heading">
									<h3>
							        	#{{loop.index}} {{ qst.text }}
						            </h3>
						        </div>
								<div class="panel-body">
							    	{% for ans in qst.answers %}
			                        <div class="{{'checkbox' if qst.is_multi() else 'radio'}} {{ 'alert-success' if ans.is_correct else '' }} {{'alert-danger' if is_chosen[ans] and not ans.is_correct else ''}}">
										<label>
											<input type="{{'checkbox' if qst.is_multi() == True else 'radio'}}" name={{qst.id}} value="{{ans.id}}" id="{{ans.id}}" {{'checked' if is_chosen[ans] else ''}}>
									    		{{ ans.text }}
										</label> 
										{%if ans.is_correct%}
											<span class="glyphicon glyphicon-ok pull-right" aria-hidden="true"></span>
										{%endif%}
										{%if is_chosen[ans] and ans.is_correct == False%}
											<span class="glyphicon glyphicon-remove pull-right" aria-hidden="true"></span>
										{%endif%}
									</div>
						            {% endfor %}
							  	</div>
							</div>
							{% endfor %}
						</div>		
				  	</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 col-md-offset-1">
					<div class="col-md-4 col-xs-4 col-sm-4">
						<h4>
							Всего вопросов: {{result.n_total}}
						</h4>
					</div>				
					<div class="col-md-4 col-xs-4 col-sm-4">
						<h4>
							Правильно отвечено: {{result.n_correct}}
						</h4>
					</div>				
					<div class="col-md-4 col-xs-4 col-sm-4">
						<h4>
							Неправильно: {{result.n_wrong}}
						</h4>
					</div>
				</div>
			</div>
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="progress">
							<div class="progress-bar {{'progress-bar-success' if (result.n_correct / result.n_total) >= success_ratio else 'progress-bar-danger'}}" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{(result.n_correct / result.n_total) * 100}}%; min-width: 2em;">
							 {{((result.n_correct / result.n_total) * 100) | int }}%
							</div>
						</div>
						<h2 class="text-center alert {{'alert-success' if (result.n_correct / result.n_total) >= success_ratio else 'alert-danger'}}">
								{{'Поздравляем! Вы успешно прошли тестирование!' if (result.n_correct / result.n_total) >= success_ratio else 'К сожалению, тест не пройден, удачи в следующий раз!'}}
						</h2>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-md-offset-6">
					<form id="testing-ending-form" class="form-horizontal" method="GET" action="/testlist">
						<input type="submit" class="btn btn-primary btn-block" value="Вернуться на главную" />
					</form>
				</div>
			</div>
		</div>
	</body>
</html>
